# =============================================================================
# CUAD 合同助手 - 生产环境配置
# 用途: 生产部署、正式服务
# 启动: python scripts/run_api.py --mode prod
# =============================================================================

# 继承 base.yaml，以下为覆盖项

# -----------------------------------------------------------------------------
# 数据配置 - 使用完整数据
# -----------------------------------------------------------------------------
data:
  sampling:
    enabled: false
    cache_enabled: false    # 生产环境不缓存采样

# -----------------------------------------------------------------------------
# 缓存配置 - 生产环境使用 Redis
# -----------------------------------------------------------------------------
cache:
  semantic:
    enabled: true
    backend: "redis"        # 生产环境使用 Redis
    similarity_threshold: 0.95
    ttl_seconds: 86400      # 24小时过期
    max_entries: 50000
  
  redis:
    host: "${REDIS_HOST:localhost}"
    port: 6379
    db: 0
    password: "${REDIS_PASSWORD:}"

# -----------------------------------------------------------------------------
# API 配置 - 生产模式多 Worker
# -----------------------------------------------------------------------------
api:
  workers: 4                # 多 Worker 并发
  reload: false             # 禁用热重载

# -----------------------------------------------------------------------------
# 评估配置 - 生产环境启用 WandB
# -----------------------------------------------------------------------------
evaluation:
  wandb:
    enabled: true
    project: "cuad-assistant"
    entity: "${WANDB_ENTITY:}"

# -----------------------------------------------------------------------------
# 日志配置 - INFO 级别
# -----------------------------------------------------------------------------
logging:
  level: "INFO"
  file: "${PROJECT_ROOT}/logs/prod.log"
  console: false            # 生产环境只写文件
